<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.17">
<title>Dev Services and UI for OpenID Connect (OIDC)</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<!DOCTYPE html>
<meta charset="UTF-8">
<link rel="stylesheet" type="text/css"
      href="https://cdnjs.cloudflare.com/ajax/libs/patternfly/3.24.0/css/patternfly.min.css">
<link rel="stylesheet" type="text/css"
      href="https://cdnjs.cloudflare.com/ajax/libs/patternfly/3.24.0/css/patternfly-additions.min.css">
<link rel="stylesheet" type="text/css"
      href="stylesheet/config.css">
<link rel="stylesheet" type="text/css"
      href="stylesheet/asciidoc-tabs.css">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/patternfly/3.24.0/js/patternfly.min.js"></script>
<script src="javascript/config.js"></script>
<script src="javascript/asciidoc-tabs.js"></script>

<style>
    .book {
        font-size: 14px;
    }

    .admonitionblock td.content>.title, .audioblock>.title, .exampleblock>.title, .imageblock>.title,
    .listingblock>.title, .literalblock>.title, .stemblock>.title, .openblock>.title, .paragraph>.title,
    .quoteblock>.title, table.tableblock>.title, .verseblock>.title, .videoblock>.title, .dlist>.title,
    .olist>.title, .ulist>.title, .qlist>.title, .hdlist>.title {
        font-size: 1.6rem;
    }

    p, blockquote, dt, td.content, span.alt, .quoteblock blockquote, .quoteblock blockquote p {
        font-size: 1.6rem;
    }

    pre code {
        font-size: 1.5rem;
    }

    #preamble>.sectionbody>[class="paragraph"]:first-of-type p {
        font-size: 1.6rem;
    }

    #header, #content, #footer, #footnotes {
        max-width: 72em;
    }
</style>
</head>
<body class="article">
<div id="header">
<h1>Dev Services and UI for OpenID Connect (OIDC)</h1>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This guide covers the Dev Services and UI for OpenID Connect (OIDC) Keycloak provider and explains how to support Dev Services and UI for other OpenID Connect providers.
It also describes Dev UI for all OpenID Connect providers which have already been started before Quarkus is launched in a dev mode.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="introduction"><a class="anchor" href="#introduction"></a>Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Quarkus introduces an experimental <code>Dev Services For Keycloak</code> feature which is enabled by default when the <code>quarkus-oidc</code> extension is started in dev mode and when the integration tests are running in test mode, but only when no <code>quarkus.oidc.auth-server-url</code> property is configured.
It starts a Keycloak container for both the dev and/or test modes and initializes them by registering the existing Keycloak realm or creating a new realm with the client and users for you to start developing your Quarkus application secured by Keycloak immediately. It will restart the container when the <code>application.properties</code> or the realm file changes have been detected.</p>
</div>
<div class="paragraph">
<p>Additionally, <a href="dev-ui.html">Dev UI</a> available at <a href="http://localhost:8080/q/dev">/q/dev</a> complements this feature with a Dev UI page which helps to acquire the tokens from Keycloak and test your Quarkus application.</p>
</div>
<div class="paragraph">
<p>If <code>quarkus.oidc.auth-server-url</code> is already set then a generic OpenID Connect Dev Console which can be used with all OpenID Connect providers will be activated, please see <a href="#dev-ui-all-oidc-providers">Dev UI for all OpenID Connect Providers</a> for more information.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="dev-services-for-keycloak"><a class="anchor" href="#dev-services-for-keycloak"></a>Dev Services for Keycloak</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Start your application without configuring <code>quarkus.oidc</code> properties in <code>application.properties</code> with:</p>
</div>
<div class="listingblock primary asciidoc-tabs-sync-cli">
<div class="title">CLI</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">quarkus dev</code></pre>
</div>
</div>
<div class="listingblock secondary asciidoc-tabs-sync-maven">
<div class="title">Maven</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">./mvnw quarkus:dev</code></pre>
</div>
</div>
<div class="listingblock secondary asciidoc-tabs-sync-gradle">
<div class="title">Gradle</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">./gradlew --console=plain quarkusDev</code></pre>
</div>
</div>
<div class="paragraph">
<p>You will see in the console something similar to:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">KeyCloak Dev Services Starting:
2021-11-02 17:14:24,864 INFO  [org.tes.con.wai.str.HttpWaitStrategy] (build-10) /unruffled_agnesi: Waiting for 60 seconds for URL: http://localhost:32781 (where port 32781 maps to container port 8080)
2021-11-02 17:14:44,170 INFO  [io.qua.oid.dep.dev.key.KeycloakDevServicesProcessor] (build-10) Dev Services for Keycloak started.</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>When logging in the Keycloak admin console, the username is <code>admin</code> and the password is <code>admin</code>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Note that by default, <code>Dev Services for Keycloak</code> will not start a new container if it finds a container with a <code>quarkus-dev-service-keycloak</code> label and connect to it if this label&#8217;s value matches the value of the <code>quarkus.keycloak.devservices.service-name</code> property (default value is <code>quarkus</code>). In such cases you will see a slighty different output when running:</p>
</div>
<div class="listingblock primary asciidoc-tabs-sync-cli">
<div class="title">CLI</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">quarkus dev</code></pre>
</div>
</div>
<div class="listingblock secondary asciidoc-tabs-sync-maven">
<div class="title">Maven</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">./mvnw quarkus:dev</code></pre>
</div>
</div>
<div class="listingblock secondary asciidoc-tabs-sync-gradle">
<div class="title">Gradle</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">./gradlew --console=plain quarkusDev</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">2021-08-27 18:42:43,530 INFO  [io.qua.dev.com.ContainerLocator] (build-15) Dev Services container found: 48fee151a31ddfe32c39965be8f61108587b25ed2f66cdc18bb926d9e2e570c5 (quay.io/keycloak/keycloak:14.0.0). Connecting to: 0.0.0.0:32797.
2021-08-27 18:42:43,600 INFO  [io.qua.oid.dep.dev.key.KeycloakDevServicesProcessor] (build-15) Dev Services for Keycloak started.
...</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that you can disable sharing the containers with <code>quarkus.keycloak.devservices.shared=false</code>.</p>
</div>
<div class="paragraph">
<p>Now open the main <a href="http://localhost:8080/q/dev">Dev UI page</a> and you will see the <code>OpenID Connect Card</code> linking to a <code>Keycloak</code> page:</p>
</div>
<div class="imageblock center">
<div class="content">
<img src="./images/dev-ui-oidc-keycloak-card.png" alt="Dev UI OpenID Connect Card">
</div>
</div>
<div class="paragraph">
<p>Click on the <code>Provider: Keycloak</code> link and you will see a Keycloak page which will be presented slightly differently depending on how <code>Dev Services for Keycloak</code> feature has been configured.</p>
</div>
<div class="sect2">
<h3 id="develop-service-applications"><a class="anchor" href="#develop-service-applications"></a>Developing Service Applications</h3>
<div class="paragraph">
<p>By default the Keycloak page can be used to support the development of a <a href="security-openid-connect.html">Quarkus OIDC service application</a>.</p>
</div>
<div class="sect3">
<h4 id="keycloak-authorization-code-grant"><a class="anchor" href="#keycloak-authorization-code-grant"></a>Authorization Code Grant</h4>
<div class="paragraph">
<p>If you set <code>quarkus.oidc.devui.grant.type=code</code> in <code>application.properties</code> (this is a default value) then an <code>authorization_code</code> grant will be used to acquire both access and ID tokens. Using this grant is recommended to emulate a typical flow where a <code>Single Page Application</code> acquires the tokens and uses them to access Quarkus services.</p>
</div>
<div class="paragraph">
<p>First you will see an option to <code>Log into Single Page Application</code>:</p>
</div>
<div class="imageblock center">
<div class="content">
<img src="./images/dev-ui-keycloak-sign-in-to-spa.png" alt="Dev UI OpenID Connect Keycloak Page - Log into Single Page Application">
</div>
</div>
<div class="paragraph">
<p>Next, after you select this option, you will be redirected to Keycloak to authenticate, example, as <code>alice:alice</code> and then returned to the page representing the SPA:</p>
</div>
<div class="imageblock center">
<div class="content">
<img src="./images/dev-ui-keycloak-test-service-from-spa.png" alt="Dev UI OpenID Connect Keycloak Single Page Application">
</div>
</div>
<div class="paragraph">
<p>You can view the acquired access and ID tokens, for example:</p>
</div>
<div class="imageblock center">
<div class="content">
<img src="./images/dev-ui-keycloak-decoded-tokens.png" alt="Dev UI OpenID Connect Keycloak Decoded Tokens View">
</div>
</div>
<div class="paragraph">
<p>This view shows the encoded JWT token on the left hand side and highlights the headers (red colour), payload/claims (green colour) and signature (blue colour). It also shows the decoded JWT token on the right hand side where you can see the header and claim names and their values.</p>
</div>
<div class="paragraph">
<p>Next test the service with either the current access or ID token. SPA usually sends the access tokens to the application endpoints but there could be cases where the ID tokens are forwarded to the application frontends for them to be aware about the user who is currently logged into SPA.</p>
</div>
<div class="paragraph">
<p>Finally you can select a <code>Log Out</code> image::dev-ui-keycloak-logout.png option if you&#8217;d like to log out and authenticate to Keycloak as a different user.</p>
</div>
<div class="paragraph">
<p>Note Keycloak may return an error when you try to <code>Log into Single Page Application</code>. For example, <code>quarkus.oidc.client-id</code> may not match the client id in the realm imported to Keycloak or the client in this realm is not configured correctly to support the authorization code flow, etc. In such cases Keycloak will return an <code>error_description</code> query parameter and <code>Dev UI</code> will also show this error description, for example:</p>
</div>
<div class="imageblock center">
<div class="content">
<img src="./images/dev-ui-keycloak-login-error.png" alt="Dev UI Keycloak Login Error">
</div>
</div>
<div class="paragraph">
<p>If the error occurs then log into Keycloak using the <code>Keycloak Admin</code> option and update the realm configuration as necesary and also check the <code>application.properties</code>.</p>
</div>
<div class="sect4">
<h5 id="test-with-swagger-ui-or-grapghql-ui"><a class="anchor" href="#test-with-swagger-ui-or-grapghql-ui"></a>Test with Swagger UI or GrapghQL UI</h5>
<div class="paragraph">
<p>You can avoid manually entering the service paths and test your service with <code>Swagger UI</code> or <code>GraphQL UI</code> if <code>quarkus-smallrye-openapi</code> and/or <code>quarkus-smallrye-graphql</code> are used in your project. For example, if you start Quarkus in dev mode with both <code>quarkus-smallrye-openapi</code> and <code>quarkus-smallrye-graphql</code> dependencies then you will see the following options after logging in into Keycloak:</p>
</div>
<div class="imageblock center">
<div class="content">
<img src="./images/dev-ui-keycloak-test-service-swaggerui-graphql.png" alt="Test your service with Swagger UI or GraphQL UI">
</div>
</div>
<div class="paragraph">
<p>For example, clicking on <code>Swagger UI</code> will open <code>Swagger UI</code> in a new browser tab where you can test the service using the token acquired by Dev UI for Keycloak.
and <code>Swagger UI</code> will not try to re-authenticate again.</p>
</div>
<div class="paragraph">
<p>Integration with <code>GraphQL UI</code> works in a similar way, the access token acquired by Dev UI for Keycloak will be used.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You may need to register a redirect URI for the authorization code flow initiated by Dev UI for Keycloak to work because Keycloak may enforce that the authenticated users are redirected only to the configured redirect URI. It is recommended to do in production to avoid the users being redirected to the wrong endpoints which might happen if the correct <code>redirect_uri</code> parameter in the authentication request URI has been manipulated.</p>
</div>
<div class="paragraph">
<p>If Keycloak does enforce it then you will see an authentication error informing you that the <code>redirect_uri</code> value is wrong.</p>
</div>
<div class="paragraph">
<p>In this case select the <code>Keycloak Admin</code> option in the right top corner, login as <code>admin:admin</code>, select the test realm and the client which Dev UI for Keycloak is configured with and add <code><a href="http://localhost:8080/q/dev/io.quarkus.quarkus-oidc/provider" class="bare">http://localhost:8080/q/dev/io.quarkus.quarkus-oidc/provider</a></code> to <code>Valid Redirect URIs</code>. If you used <code>-Dquarkus.http.port</code> when starting Quarkus then change <code>8080</code> to the value of <code>quarkus.http.port</code>.</p>
</div>
<div class="paragraph">
<p>If the container is shared between multiple applications running on different ports then you will need to register <code>redirect_uri</code> values for each of these applications.</p>
</div>
<div class="paragraph">
<p>You can set the <code>redirect_uri</code> value to <code>*</code> only for the test purposes, especially when the containers are shared between multiple applications.</p>
</div>
<div class="paragraph">
<p><code>*</code> <code>redirect_uri</code> value is set by <code>Dev Services for Keycloak</code> when it creates a default realm, if no custom realm is imported.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="implicit-grant"><a class="anchor" href="#implicit-grant"></a>Implicit Grant</h4>
<div class="paragraph">
<p>If you set <code>quarkus.oidc.devui.grant.type=implicit</code> in <code>application.properties</code> then an <code>implicit</code> grant will be used to acquire both access and ID tokens. Use this grant for emulating a <code>Single Page Application</code> only if the authorization code grant does not work (for example, a client is configured in Keycloak to support an implicit grant, etc).</p>
</div>
</div>
<div class="sect3">
<h4 id="password-grant"><a class="anchor" href="#password-grant"></a>Password Grant</h4>
<div class="paragraph">
<p>If you set <code>quarkus.oidc.devui.grant.type=password</code> in <code>application.properties</code> then you will see a screen like this one:</p>
</div>
<div class="imageblock center">
<div class="content">
<img src="./images/dev-ui-keycloak-password-grant.png" alt="Dev UI OpenID Connect Keycloak Page - Password Grant">
</div>
</div>
<div class="paragraph">
<p>Enter a registered user name, user password, a relative service endpoint path, click on <code>Test Service</code> and you will see a status code such as <code>200</code>, <code>403</code>, <code>401</code> or <code>404</code> printed.
If the user name is also set in <code>quarkus.keycloak.devservices.users</code> map property containing user names and passwords then you do not have to set a password when testing the service.
But note, you do not have to initialize <code>quarkus.keycloak.devservices.users</code> to test the service using the password grant.</p>
</div>
<div class="paragraph">
<p>You will also see in the Dev UI console something similar to:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">2021-07-19 17:58:11,407 INFO  [io.qua.oid.dep.dev.key.KeycloakDevConsolePostHandler] (security-openid-connect-quickstart-dev.jar) (DEV Console action) Using password grant to get a token from 'http://localhost:32818/realms/quarkus/protocol/openid-connect/token' for user 'alice' in realm 'quarkus' with client id 'quarkus-app'
2021-07-19 17:58:11,533 INFO  [io.qua.oid.dep.dev.key.KeycloakDevConsolePostHandler] (security-openid-connect-quickstart-dev.jar) (DEV Console action) Test token: eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJ6Z2tDazJQZ1JaYnVlVG5kcTFKSW1sVnNoZ2hhbWhtbnBNcXU0QUt5MnJBIn0.ey...
2021-07-19 17:58:11,536 INFO  [io.qua.oid.dep.dev.key.KeycloakDevConsolePostHandler] (security-openid-connect-quickstart-dev.jar) (DEV Console action) Sending token to 'http://localhost:8080/api/admin'
2021-07-19 17:58:11,674 INFO  [io.qua.oid.dep.dev.key.KeycloakDevConsolePostHandler] (security-openid-connect-quickstart-dev.jar) (DEV Console action) Result: 200</code></pre>
</div>
</div>
<div class="paragraph">
<p>A token is acquired from Keycloak using a <code>password</code> grant and is sent to the service endpoint.</p>
</div>
</div>
<div class="sect3">
<h4 id="client-credentials-grant"><a class="anchor" href="#client-credentials-grant"></a>Client Credentials Grant</h4>
<div class="paragraph">
<p>If you set <code>quarkus.oidc.devui.grant.type=client</code> then a <code>client_credentials</code> grant will be used to acquire a token, with the page showing no <code>User</code> field in this case:</p>
</div>
<div class="imageblock center">
<div class="content">
<img src="./images/dev-ui-keycloak-client-credentials-grant.png" alt="Dev UI OpenID Connect Keycloak Page - Client Credentials Grant">
</div>
</div>
<div class="paragraph">
<p>You can test the service the same way as with the <code>Password</code> grant.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="develop-web-app-applications"><a class="anchor" href="#develop-web-app-applications"></a>Developing OpenID Connect Web App Applications</h3>
<div class="paragraph">
<p>If you develop a <a href="security-openid-connect-web-authentication.html">Quarkus OIDC web-app application</a> then you should set <code>quarkus.oidc.application-type=web-app</code> in <code>application.properties</code> before starting the application.</p>
</div>
<div class="paragraph">
<p>You will see a screen like this one:</p>
</div>
<div class="imageblock center">
<div class="content">
<img src="./images/dev-ui-keycloak-sign-in-to-service.png" alt="Dev UI OpenID Connect Keycloak Sign In">
</div>
</div>
<div class="paragraph">
<p>Set a relative service endpoint path, click on <code>Sign In To Service</code> and you will be redirected to Keycloak to enter a username and password in a new browser tab and get a response from the Quarkus application.</p>
</div>
<div class="paragraph">
<p>Note that in this case Dev UI does not really enrich a dev experience since it is a Quarkus OIDC <code>web-app</code> application which controls the authorization code flow and acquires the tokens.</p>
</div>
<div class="paragraph">
<p>To make Dev UI more useful for supporting the development of OIDC <code>web-app</code> applications you may want to consider setting profile specific values for <code>quarkus.oidc.application-type</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-properties" data-lang="properties">%prod.quarkus.oidc.application-type=web-app
%test.quarkus.oidc.application-type=web-app
%dev.quarkus.oidc.application-type=service</code></pre>
</div>
</div>
<div class="paragraph">
<p>It will ensure that all Dev UI options described in <a href="#develop-service-applications">Developing OpenID Connect Service Applications</a> will be available when your <code>web-app</code> application is run in dev mode. The limitation of this approach is that both access and ID tokens returned with the code flow and acquired with Dev UI will be sent to the endpoint as HTTP <code>Bearer</code> tokens - which will not work well if your endpoint requires the injection of <code>IdToken</code>.
However it will work as expected if your <code>web-app</code> application only uses the access token, for example, as a source of roles or to get <code>UserInfo</code>, even if it is assumed to be a <code>service</code> application in devmode.</p>
</div>
</div>
<div class="sect2">
<h3 id="running-the-tests"><a class="anchor" href="#running-the-tests"></a>Running the tests</h3>
<div class="paragraph">
<p>You can run the tests against a Keycloak container started in a test mode in a <a href="continuous-testing.html">Continuous Testing</a> mode.</p>
</div>
<div class="paragraph">
<p>It is also recommended to run the integration tests against Keycloak using <code>Dev Services for Keycloak</code>.
Please see <a href="security-openid-connect.html#integration-testing-keycloak-devservices">Testing OpenID Connect Service Applications with Dev Services</a> and <a href="security-openid-connect-web-authentication.html#integration-testing-keycloak-devservices">Testing OpenID Connect WebApp Applications with Dev Services</a> for more information.</p>
</div>
</div>
<div class="sect2">
<h3 id="keycloak-initialization"><a class="anchor" href="#keycloak-initialization"></a>Keycloak Initialization</h3>
<div class="paragraph">
<p>The <code>quay.io/keycloak/keycloak:17.0.0</code> image which contains a Keycloak distribution powered by Quarkus is used to start a container by default.
<code>quarkus.keycloak.devservices.image-name</code> can be used to change the Keycloak image name. For example, set it to <code>quay.io/keycloak/keycloak:17.0.0-legacy</code> to use a Keycloak distribution powered by WildFly.</p>
</div>
<div class="paragraph">
<p><code>Dev Services for Keycloak</code> will initialize a launched Keycloak server next.</p>
</div>
<div class="paragraph">
<p>By default, the <code>quarkus</code>, <code>quarkus-app</code> client with a <code>secret</code> password, <code>alice</code> and <code>bob</code> users (with the passwords matching the names), and <code>user</code> and <code>admin</code> roles are created, with <code>alice</code> given both <code>admin</code> and <code>user</code> roles and <code>bob</code> - the <code>user</code> role.</p>
</div>
<div class="paragraph">
<p>Usernames, secrets and their roles can be customized with <code>quarkus.keycloak.devservices.users</code> (the map which contains usernames and secrets) and <code>quarkus.keycloak.devservices.roles</code> (the map which contains user names and comma separated role values).</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-properties" data-lang="properties">%dev.quarkus.keycloak.devservices.users.duke=dukePassword
%dev.quarkus.keycloak.devservices.roles.duke=reader
%dev.quarkus.keycloak.devservices.users.john=johnPassword
%dev.quarkus.keycloak.devservices.roles.john=reader,writer</code></pre>
</div>
</div>
<div class="paragraph">
<p>This configuration creates two users:
 * <code>duke</code> with a <code>dukePassword</code> password and a <code>reader</code> role
 * <code>john</code> with a <code>johnPassword</code> password and <code>reader</code> and <code>writer</code> roles</p>
</div>
<div class="paragraph">
<p><code>quarkus.oidc.client-id</code> and <code>quarkus.oidc.credentials.secret</code> can be used to customize the client id and secret.</p>
</div>
<div class="paragraph">
<p>However it is likely your Keycloak configuration may be more complex and require setting more properties.</p>
</div>
<div class="paragraph">
<p>This is why <code>quarkus.keycloak.devservices.realm-path</code> is always checked first before trying to initialize Keycloak with the default or configured realm, client, user and roles properties. If the realm file exists on the file system or classpath then only this realm will be used to initialize Keycloak.</p>
</div>
<div class="paragraph">
<p>Also the Keycloak page offers an option to <code>Sign In To Keycloak To Configure Realms</code> using a <code>Keycloak Admin</code> option in the right top corner:</p>
</div>
<div class="imageblock center">
<div class="content">
<img src="./images/dev-ui-keycloak-admin.png" alt="Dev UI OpenID Connect Keycloak Page - Keycloak Admin">
</div>
</div>
<div class="paragraph">
<p>Sign in to Keycloak as <code>admin:admin</code> in order to further customize the realm properties, create or import a new realm, export the realm.</p>
</div>
<div class="paragraph">
<p>Note that even if you initialize Keycloak from a realm file, it is still needed to set <code>quarkus.keycloak.devservices.users</code> property if a <code>password</code> grant is used to acquire the tokens to test the OIDC <code>service</code> applications.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="disable-dev-services-for-keycloak"><a class="anchor" href="#disable-dev-services-for-keycloak"></a>Disable Dev Services for Keycloak</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>Dev Services For Keycloak</code> will not be activated if either <code>quarkus.oidc.auth-server-url</code> is already initialized or the default OIDC tenant is disabled with <code>quarkus.oidc.tenant.enabled=false</code>, irrespectively of whether you work with Keycloak or not.</p>
</div>
<div class="paragraph">
<p>If you prefer not to have a <code>Dev Services for Keycloak</code> container started or do not work with Keycloak then you can also disable this feature with <code>quarkus.keycloak.devservices.enabled=false</code> - it will only be necessary if you expect to start <code>quarkus:dev</code> without <code>quarkus.oidc.auth-server-url</code>.</p>
</div>
<div class="paragraph">
<p>The main Dev UI page will include an empty <code>OpenID Connect Card</code> when <code>Dev Services for Keycloak</code> is disabled and the <code>quarkus.oidc.auth-server-url</code> property
has not been initialized:</p>
</div>
<div class="imageblock center">
<div class="content">
<img src="./images/dev-ui-oidc-card.png" alt="Dev UI OpenID Connect Card">
</div>
</div>
<div class="paragraph">
<p>If <code>quarkus.oidc.auth-server-url</code> is already set then a generic OpenID Connect Dev Console which can be used with all OpenID Connect providers may be activated, please see <a href="#dev-ui-all-oidc-providers">Dev UI for all OpenID Connect Providers</a> for more information.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="dev-ui-all-oidc-providers"><a class="anchor" href="#dev-ui-all-oidc-providers"></a>Dev UI for all OpenID Connect Providers</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If <code>quarkus.oidc.auth-server-url</code> points to an already started OpenID Connect provider (which can be Keycloak or other provider), <code>quarkus.oidc.auth-server-url</code> is set to <code>service</code> (which is a default value) and at least <code>quarkus.oidc.client-id</code> is set then <code>Dev UI for all OpenID Connect Providers</code> will be activated.</p>
</div>
<div class="paragraph">
<p>Setting <code>quarkus.oidc.credentials.secret</code> will mostly likely be required for Keycloak and other providers for the authorization code flow initiated from Dev UI to complete, unless the client identified with <code>quarkus.oidc.client-id</code> is configured as a public client in your OpenID Connect provider&#8217;s administration console.</p>
</div>
<div class="paragraph">
<p>Run:</p>
</div>
<div class="listingblock primary asciidoc-tabs-sync-cli">
<div class="title">CLI</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">quarkus dev</code></pre>
</div>
</div>
<div class="listingblock secondary asciidoc-tabs-sync-maven">
<div class="title">Maven</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">./mvnw quarkus:dev</code></pre>
</div>
</div>
<div class="listingblock secondary asciidoc-tabs-sync-gradle">
<div class="title">Gradle</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">./gradlew --console=plain quarkusDev</code></pre>
</div>
</div>
<div class="paragraph">
<p>And you will see the following message:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">...
2021-09-07 15:53:42,697 INFO  [io.qua.oid.dep.dev.OidcDevConsoleProcessor] (build-41) OIDC Dev Console: discovering the provider metadata at http://localhost:8180/realms/quarkus/.well-known/openid-configuration
...</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the provider metadata discovery has been successful then, after you open the main <a href="http://localhost:8080/q/dev">Dev UI page</a>, you will see the <code>OpenID Connect Card</code> page linking to <code>Dev Console</code>:</p>
</div>
<div class="imageblock center">
<div class="content">
<img src="./images/dev-ui-oidc-devconsole-card.png" alt="Generic Dev UI OpenID Connect Card">
</div>
</div>
<div class="paragraph">
<p>Follow the link and you&#8217;ll be able log in to your provider, get the tokens and test the application. The experience will be the same as described in the <a href="#keycloak-authorization-code-grant">Authorization Code Grant for Keycloak</a> section, where <code>Dev Services for Keycloak</code> container has been started, especially if you work with Keycloak (please also pay attention to a <code>redirect_uri</code> note in that section).</p>
</div>
<div class="paragraph">
<p>If you work with other providers then a Dev UI experience described in the <a href="#keycloak-authorization-code-grant">Authorization Code Grant for Keycloak</a> section might differ slightly. For example, an access token may not be in a JWT format so it won&#8217;t be possible to show its internal content, though all providers should return an ID Token as JWT.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The current access token is used by default to test the service with <code>Swagger UI</code> or <code>GrapghQL UI</code>. If the provider (other than Keycloak) returns a binary access token then it will be used with <code>Swagger UI</code> or <code>GrapghQL UI</code> only if this provider has a token introspection endpoint otherwise an <code>IdToken</code> which is always in a JWT format will be passed to <code>Swagger UI</code> or <code>GrapghQL UI</code>. In such cases you can verify with the manual Dev UI test that <code>401</code> will always be returned for the current binary access token. Also note that using <code>IdToken</code> as a fallback with either of these UIs is only possible with the authorization code flow.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Some providers such as <code>Auth0</code> do not support a standard RP initiated logout so the provider specific logout properties will have to be confogured for a logout option be visible, please see <a href="security-openid-connect-web-authentication.html#user-initiated-logout">OpenID Connect User-Initiated Logout</a> for more information.</p>
</div>
<div class="paragraph">
<p>Similarly, if you&#8217;d like to use a <code>password</code> or <code>client_credentials</code> grant for Dev UI to acquire the tokens then you may have to configure some extra provider specific properties, for example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-properties" data-lang="properties">quarkus.oidc.devui.grant.type=password
quarkus.oidc.devui.grant-options.password.audience=http://localhost:8080</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="dev-services-and-ui-support-for-other-openid-connect-providers"><a class="anchor" href="#dev-services-and-ui-support-for-other-openid-connect-providers"></a>Dev Services and UI Support for other OpenID Connect Providers</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Your custom extension would need to extend <code>quarkus-oidc</code> and add the dependencies required to support your provider to the extension&#8217;s <code>deployment</code> module only.</p>
</div>
<div class="paragraph">
<p>The build step dealing with the <code>Dev Services</code> should additionally register two runtime properties into the "io.quarkus.quarkus-oidc" namespace: <code>oidcProviderName</code> (for example, <code>Google</code>) and <code>oidcProviderUrlBase</code> (for example: <code>mycompany.devservices-google</code>) for the <code>OpenID Connect Card</code> to link to the Dev UI page representing your provider, for example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">package io.quarkus.oidc.okta.runtime;

import java.util.function.Supplier;

import io.quarkus.runtime.annotations.Recorder;

// This simple recorder is the only code which will be located in the extension's `runtime` module
@Recorder
public class OktaDevServicesRecorder {

    public Supplier&lt;String&gt; getProviderName() {
        return new Supplier&lt;String&gt;() {

            @Override
            public String get() {
                return "OKTA";
            }
        };
    }

    public Supplier&lt;String&gt; getProviderUrlBase() {
        return new Supplier&lt;String&gt;() {

            @Override
            public String get() {
                return "io.quarkus" + "." + "quarkus-oidc-okta";
            }
        };
    }
}


package io.quarkus.oidc.okta.deployment.devservices;

import static io.quarkus.deployment.annotations.ExecutionTime.RUNTIME_INIT;

import java.util.Optional;

import io.quarkus.deployment.IsDevelopment;
import io.quarkus.deployment.annotations.BuildProducer;
import io.quarkus.deployment.annotations.BuildStep;
import io.quarkus.deployment.annotations.Consume;
import io.quarkus.deployment.annotations.Record;
import io.quarkus.deployment.builditem.RuntimeConfigSetupCompleteBuildItem;
import io.quarkus.devconsole.spi.DevConsoleRouteBuildItem;
import io.quarkus.devconsole.spi.DevConsoleRuntimeTemplateInfoBuildItem;

public class OktaDevConsoleProcessor {

    @BuildStep(onlyIf = IsDevelopment.class)
    @Record(value = RUNTIME_INIT)
    public void setOidcProviderProperties(BuildProducer&lt;DevConsoleRuntimeTemplateInfoBuildItem&gt; provider,
            OktaDevServicesRecorder recorder,
            Optional&lt;DevServicesConfigBuildItem&gt; configProps) {
        if (configProps.isPresent()) {
            provider.produce(new DevConsoleRuntimeTemplateInfoBuildItem("io.quarkus", "quarkus-oidc", "oidcProviderName",
                    recorder.getProviderName()));
            provider.produce(new DevConsoleRuntimeTemplateInfoBuildItem("io.quarkus", "quarkus-oidc", "oidcProviderUrlBase",
                    recorder.getProviderUrlBase()));
        }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Additionally, the extension should produce a <code>io.quarkus.oidc.deployment.devservices.OidcProviderBuildItem</code> to disable the default <code>Dev Services for Keycloak</code>, instead of the users having to type <code>quarkus.keycloak.devservices.enabled=false</code>.</p>
</div>
<div class="paragraph">
<p>Please follow the <a href="dev-ui.html">Dev UI</a> tutorial as well as check the <code>extensions/oidc/deployment</code> sources for more ideas.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="non-application-root-path-considerations"><a class="anchor" href="#non-application-root-path-considerations"></a>Non Application Root Path Considerations</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This document refers to the <code><a href="http://localhost:8080/q/dev" class="bare">http://localhost:8080/q/dev</a></code> Dev UI URL in several places where <code>q</code> is a default non application root path. If you customize <code>quarkus.http.root-path</code> and/or <code>quarkus.http.non-application-root-path</code> properties then replace <code>q</code> accordingly, please see <a href="https://quarkus.io/blog/path-resolution-in-quarkus/">Path Resolution in Quarkus</a> for more information.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="references"><a class="anchor" href="#references"></a>References</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="dev-ui.html">Dev UI</a></p>
</li>
<li>
<p><a href="https://www.keycloak.org/documentation.html">Keycloak Documentation</a></p>
</li>
<li>
<p><a href="https://openid.net/connect/">OpenID Connect</a></p>
</li>
<li>
<p><a href="security-openid-connect.html">Quarkus - Using OpenID Connect to Protect Service Applications using Bearer Token Authorization</a></p>
</li>
<li>
<p><a href="security-openid-connect-web-authentication.html">Quarkus - Using OpenID Connect to Protect Web Applications using Authorization Code Flow</a></p>
</li>
<li>
<p><a href="security.html">Quarkus Security</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2022-03-17 11:27:40 +0800
</div>
</div>
</body>
</html>